### Run MCMC Analysis using jags
library(R2jags)
library(rstan)
library(rjags)
dyn.load(file, DLLpath = DLLpath, ...)
library("jagsUI", lib.loc="~/Library/R/3.5/library")
detach("package:jagsUI", unload=TRUE)
library("R2jags", lib.loc="~/Library/R/3.5/library")
library("R2WinBUGS", lib.loc="~/Library/R/3.5/library")
library("rjags", lib.loc="~/Library/R/3.5/library")
library("jagsUI", lib.loc="~/Library/R/3.5/library")
update.packages("jagsUI")
update.packages("rjags")
update.packages("r2jags")
library(R2jags)
devtools::install_url("http://sourceforge.net/projects/mcmc-jags/files/rjags/3/rjags_3-2.tar.gz",
args="--configure-args='--with-jags-include=/Users/casallas/homebrew/opt/jags/include/JAGS
--with-jags-lib=/Users/casallas/homebrew/opt/jags/lib'
"
)
devtools::install_url("https://sourceforge.net/projects/mcmc-jags/files/JAGS/4.x/Mac%20OS%20X/",
args="--configure-args='--with-jags-include=/Users/casallas/homebrew/opt/jags/include/JAGS
--with-jags-lib=/Users/casallas/homebrew/opt/jags/lib'
"
)
remove.packages("rjags", lib="~/Library/R/3.5/library")
remove.packages("jagsUI", lib="~/Library/R/3.5/library")
remove.packages("R2jags", lib="~/Library/R/3.5/library")
library("rjags", lib.loc="~/Library/R/3.5/library")
remove.packages("rjags", lib="~/Library/R/3.5/library")
library("R2WinBUGS", lib.loc="~/Library/R/3.5/library")
library("R2jags", lib.loc="~/Library/R/3.5/library")
install.packages("rjags")
library("rjags", lib.loc="~/Library/R/3.5/library")
remove.packages("rjags", lib="~/Library/R/3.5/library")
remove.packages("R2jags", lib="~/Library/R/3.5/library")
install.packages("jagsUI")
library(jagsUI)
library("jagsUI", lib.loc="~/Library/R/3.5/library")
install.packages("~/Downloads/JAGS-4.3.0.dmg", repos = NULL)
library("jagsUI", lib.loc="~/Library/R/3.5/library")
detach("package:jagsUI", unload=TRUE)
remove.packages("jagsUI", lib="~/Library/R/3.5/library")
library("rjags", lib.loc="~/Library/R/3.5/library")
devtools::install_url("http://sourceforge.net/projects/mcmc-jags/files/rjags/4/rjags_4-4.tar.gz")
devtools::install_url("http://sourceforge.net/projects/mcmc-jags/files/rjags/4/rjags_4-4.tar.gz")
library(rjags)
devtools::install_url("http://sourceforge.net/projects/mcmc-jags/files/rjags/4/rjags_4-4.tar.gz",)
remove.packages("rjags", lib="~/Library/R/3.5/library")
library(geosphere)
daylength(45,59)
daylength(45,59+61)
###Script to stitch together the 4 files f WDFW recreational fishing data sent by Karen Kloempken
###File started 5 April 2019
###By Ailene Ettinger
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
# Set working directory:
setwd("~/Documents/GitHub/fishphen")
#or from laptop:
#setwd("/Users/aileneettinger/Documents/GitHub/fishphen")
# Load libraries
#Read in the files
#1987-1993 data
d1<-read.csv("data/WDFW_fromkk/PugetSound_1987_1989-1993_SalmonCatch-ReleaseData.csv", header=TRUE)
#Karen says 1987?1993 date format is MDDYY.
#Some of the years have Location names and some do not.
#The location code should be the same for all years.
#Some of the species name are available but some years it was not. All years have species codes though.
head(d1)
unique(d1$X.OtherSpCaught)
unique(d1$SpeciesName)
unique(d1$OtherSpCode)#NA 101 102 103 104 105 106 123 107 108
#Add 3 additional columns that other years have
d1$Rel.Sps.Code<-NA
d1$X.Rel<-NA
d1$CohoCaughtAD<-NA
#reorder dataset so that columns are in same order as other years
#add year
d1$year<-paste("19",substr(d1$SampleDate,nchar(d1$SampleDate)-1,nchar(d1$SampleDate)), sep="")
#add doy
d1$day<-substr(d1$SampleDate,nchar(d1$SampleDate)-3,nchar(d1$SampleDate)-2)
d1$mon<-substr(d1$SampleDate,nchar(d1$SampleDate)-(nchar(d1$SampleDate)-1),nchar(d1$SampleDate)-4)
d1$date<-as.Date(paste(d1$year,d1$mon,d1$day,sep="-"))
d1$doy<-strftime(d1$date, format = "%j")
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d1$year)
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d1[d1$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
length(colnames(d1))
d1[d1$year=="1999",]
head(d1)
tail(SampleDate)
tail(d1)
dim(d1[d1$year=="1999",])
which(d1$year=="1999")
d1[31798:31806,]
d1[32220:32235,]
###Script to stitch together the 4 files f WDFW recreational fishing data sent by Karen Kloempken
###File started 5 April 2019
###By Ailene Ettinger
#housekeeping
rm(list=ls())
options(stringsAsFactors = FALSE)
# Set working directory:
setwd("~/Documents/GitHub/fishphen")
#or from laptop:
#setwd("/Users/aileneettinger/Documents/GitHub/fishphen")
# Load libraries
#Read in the files
#1987-1993 data
d1<-read.csv("data/WDFW_fromkk/PugetSound_1987_1989-1993_SalmonCatch-ReleaseData.csv", header=TRUE)
#Karen says 1987?1993 date format is MDDYY.
#Some of the years have Location names and some do not.
#The location code should be the same for all years.
#Some of the species name are available but some years it was not. All years have species codes though.
head(d1)
unique(d1$X.OtherSpCaught)
unique(d1$SpeciesName)
unique(d1$OtherSpCode)#NA 101 102 103 104 105 106 123 107 108
#Add 3 additional columns that other years have
d1$Rel.Sps.Code<-NA
d1$X.Rel<-NA
d1$CohoCaughtAD<-NA
#add year
d1$year<-paste("19",substr(d1$SampleDate,nchar(d1$SampleDate)-1,nchar(d1$SampleDate)), sep="")
d1$year[d1$year=="1999"]<-"1989"
#add doy
d1$day<-substr(d1$SampleDate,nchar(d1$SampleDate)-3,nchar(d1$SampleDate)-2)
d1$mon<-substr(d1$SampleDate,nchar(d1$SampleDate)-(nchar(d1$SampleDate)-1),nchar(d1$SampleDate)-4)
d1$date<-as.Date(paste(d1$year,d1$mon,d1$day,sep="-"))
d1$doy<-strftime(d1$date, format = "%j")
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d1$year)
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d1[d1$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
colnames(d1)
#1994-1996
d2<-read.csv("data/WDFW_fromkk/PugetSound_1994-1996_SalmonCatch-ReleaseData.csv", header=TRUE)
head(d2)
colnames(d1)[1:13]<-c("SampleDate","LoCode","LocName","CRCArea","BoatIntNum","No.Anglers","No.Chin","No.Coho","OtherSpCode","SpName", "No.OtherSpp","Rel.Sp.Code","No.Rel")                        "CohoCaughtAD"                 "year"
colnames(d1)[1:13]
colnames(d1)[1:13]<-c("SampleDate","LoCode","LocName","CRCArea","BoatIntNum","No.Anglers","No.Chin","No.Coho","OtherSpCode","SpName", "No.OtherSpp","Rel.Sp.Code","No.Rel")
#1994-1996
d2<-read.csv("data/WDFW_fromkk/PugetSound_1994-1996_SalmonCatch-ReleaseData.csv", header=TRUE)
head(d2)
head(d2)
unique(d2$X.OtherSpCaught)
unique(d2$SpeciesName)
unique(d2$OtherSpCode)#NA 101 102 103 104 105 106 123 107 108
d2$CohoCaughtAD<-NA
#add year
d2$year<-paste("19",substr(d2$SampleDate,nchar(d2$SampleDate)-1,nchar(d2$SampleDate)), sep="")
#add doy
d2$day<-substr(d2$SampleDate,nchar(d2$SampleDate)-3,nchar(d2$SampleDate)-2)
2
d2$day<-substr(d2$SampleDate,nchar(d2$SampleDate)-3,nchar(d2$SampleDate)-2)
d2$mon<-substr(d2$SampleDate,nchar(d2$SampleDate)-(nchar(d2$SampleDate)-1),nchar(d2$SampleDate)-4)
d2$date<-as.Date(paste(d2$year,d2$mon,d2$day,sep="-"))
d2$doy<-strftime(d2$date, format = "%j")
#Try plotting some things just to see...
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d2[d2$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
years<-unique(d2$year)
years
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d2[d2$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
d2$doy
d2<-read.csv("data/WDFW_fromkk/PugetSound_1994-1996_SalmonCatch-ReleaseData.csv", header=TRUE)
head(d2)
unique(d2$X.OtherSpCaught)
unique(d2$SpeciesName)
unique(d2$OtherSpCode)#NA 101 102 103 104 105 106 123 107 108
d2$CohoCaughtAD<-NA
#add year
d2$year<-paste("19",substr(d2$SampleDate,nchar(d2$SampleDate)-1,nchar(d2$SampleDate)), sep="")
#add doy
d2$day<-substr(d2$SampleDate,nchar(d2$SampleDate)-3,nchar(d2$SampleDate)-2)
d2$mon<-substr(d2$SampleDate,nchar(d2$SampleDate)-(nchar(d2$SampleDate)-1),nchar(d2$SampleDate)-4)
d2$date<-as.Date(paste(d2$year,d2$mon,d2$day,sep="-"))
d2$doy<-strftime(d2$date, format = "%j")
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d2$year)
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#ne
hist(d2$doy)
hist(as.numeric(d2$doy))
hist(as.integer(d2$doy))
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d2[d2$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d2$year)
years
as.integer(yr$doy)
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d2$year)
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d2[d2$year==years[i],]
plot(as.integer(yr$doy),yr$X.ChinookCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$X.CohoCaught)
}
colnames(d2)
#Try plotting some things just to see...
quartz(height=6,width=15)
par(mfrow=c(1,7))
years<-unique(d2$year)
#fas<-unique(d1$CRCArea)
#9567 unique fishing areas!
#need to convert these to fishing areas!
for(i in 1:length(years)){
yr<-d2[d2$year==years[i],]
hist(as.integer(yr$doy))
plot(as.integer(yr$doy),yr$ChinCaught,type= "p", pch=21,bg="salmon",xlab="DOY", ylab="Fish Caught", main=paste(years[i]))
points(as.integer(yr$doy),yr$CohoCaught)
}
colnames(d2)[1:13]
colnames(d2)[1:13]<-c("SampleDate","LoCode","LocName","CRCArea","BoatIntNum","Anglers","ChinCaught","CohoCaught","OtherSpCode","SpName", "NoOtherSpp","RelSpCode","NoRel")
#1997-2000
d3<-read.csv("data/WDFW_fromkk/PugetSound_1997-2000_SalmonCatch-ReleaseData.csv", header=TRUE)
head(d3)
